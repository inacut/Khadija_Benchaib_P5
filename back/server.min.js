const http=require("http"),app=require("./app"),normalizePort=val=>{const port=parseInt(val,10);return isNaN(port)?val:port>=0&&port},port=normalizePort(process.env.PORT||"3000");app.set("port",port);const errorHandler=error=>{if("listen"!==error.syscall)throw error;const address=server.address(),bind="string"==typeof address?"pipe "+address:"port: "+port;switch(error.code){case"EACCES":console.error(bind+" requires elevated privileges."),process.exit(1);case"EADDRINUSE":console.error(bind+" is already in use."),process.exit(1);default:throw error}},server=http.createServer(app);server.on("error",errorHandler),server.on("listening",()=>{const address=server.address(),bind="string"==typeof address?"pipe "+address:"port "+port;console.log("Listening on "+bind)}),server.listen(port);